LoadModule ssl_module modules/mod_ssl.so


Listen 443 https

SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog

SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300

SSLCryptoDevice builtin

<VirtualHost _default_:443>

ErrorLog logs/ssl_error_log
TransferLog logs/ssl_access_log
LogLevel warn

SSLEngine on

SSLHonorCipherOrder on

SSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256

SSLCertificateFile "/etc/dite_pki/certs/web.crt"
SSLCertificateKeyFile "/etc/dite_pki/certs/web.key"
SSLCertificateChainFile "/etc/dite_pki/ca/ca-signing-chain.pem"

<FilesMatch "\.(cgi|shtml|phtml|php)$">
    SSLOptions +StdEnvVars
</FilesMatch>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
</Directory>

BrowserMatch "MSIE [2-5]" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

SSLVerifyClient none
SSLCACertificateFile "/etc/dite_pki/ca/ca-signing-chain.pem"

<Location "/openemr-5_0_1_3">
#SSLVerifyClient require
#SSLVerifyDepth 2
#Once openEMR is configured it is then possible to
#remove this from the services file


</Location>


<Location "/private">
</Location>

<Location "/private/notes">
AuthType Basic
AuthName "Authentication Required"
AuthUserFile "/etc/httpd/htpasswd"
Require valid-user

Order allow,deny
Allow from all
</Location>

</VirtualHost>